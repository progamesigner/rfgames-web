{{- $context := 0 | index . -}}
{{- $type := 1 | index . -}}
{{- $name := 2 | index . -}}

{{- $id := $name -}}
{{- $slug := $name | slice $context | partial "functions/gw2-data-slugify.string" -}}

{{- if $name | string | eq $name -}}
    {{- $slugToId := dict -}}

    {{- if $type | eq "item" -}}
        {{- $slugToId = slice $context | partialCached "functions/gw2-data-item-slug-to-id.dict" -}}
    {{- end -}}

    {{- if $type | eq "skill" -}}
        {{- $slugToId = slice $context | partialCached "functions/gw2-data-skill-slug-to-id.dict" -}}
    {{- end -}}

    {{- if $type | eq "specialization" -}}
        {{- $slugToId = slice $context | partialCached "functions/gw2-data-specialization-slug-to-id.dict" -}}
    {{- end -}}

    {{- if $type | eq "trait" -}}
        {{- $slugToId = slice $context | partialCached "functions/gw2-data-trait-slug-to-id.dict" -}}
    {{- end -}}

    {{- $id = $slug | index $slugToId | default 0 | int -}}
{{- end -}}

{{- return $id -}}
