{{- $context := 0 | index . -}}
{{- $url := 1 | index . -}}
{{- $page := 2 | index . | default 0 -}}
{{- $count := 3 | index . | default 200 -}}

{{- $data := dict "page" $page "page_size" $count | slice $context $url | partial "functions/gw2-api-url.string" | getJSON -}}
{{- if $data | len | gt 0 -}}
  {{- $nextPage := $page | add 1 -}}
  {{- $data = slice $context $url $nextPage $count | partial "functions/gw2-api-paginated-data.dict" | merge $data -}}
{{- end -}}

{{- return $data -}}
